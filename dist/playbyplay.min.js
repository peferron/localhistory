!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.playbyplay={})}(this,function(e){"use strict";function r(){if(!p)throw new Error("localStorage is not supported");if(!h)throw new Error("JSON is not supported");if(!m)throw new Error("Array.isArray is not supported")}function n(e){var r=void 0;try{r=a()}catch(n){y.console&&console.error("playbyplay: could not load previous runs, resetting history",n),r=[]}r.length&&t(e,r[r.length-1])||(r.push(e),o(r))}function t(e,r){return JSON.stringify(e)===JSON.stringify(r)}function o(e){for(e.length>E&&e.splice(0,e.length-E);;){var r=JSON.stringify(e);if(r.length>A){if(e.length<2)throw new Error("Could not save run of length "+r.length+", the maximum length is "+A);i(e)}else try{return void(localStorage[w]=r)}catch(n){if(u(n)){if(e.length<2)throw new Error("Could not save run of length "+r.length+", exceeds localStorage quota");i(e);continue}throw n}}}function i(e){e.splice(0,Math.ceil(e.length/2))}function u(e){return e&&(22===e.code||1014===e.code&&"NS_ERROR_DOM_QUOTA_REACHED"===e.name)}function a(){var e=localStorage[w];if(!e)return[];var r=JSON.parse(e);if(!Array.isArray(r))throw new Error("Loaded runs are not an Array");return r}function c(){localStorage.removeItem(w)}function l(e,r){return g(function(){y.required(),S.save(e)},r,setTimeout)}function f(e){return g(function(){return y.required(),S.load()},e)}function s(e){return g(function(){y.required(),S.clear()},e)}function g(e,r){var n=void 0===arguments[2]?_:arguments[2];return y.promise?new Promise(function(t,o){n(function(){d(e,function(e,n){e?o(e):t(n),r&&r(e,n)})})}):void n(function(){d(e,r)})}function d(e,r){var n=null,t=void 0;try{t=e()}catch(o){n=o}r&&r(n,t)}var y=Object.defineProperties({},{required:{get:function(){return r},configurable:!0,enumerable:!0},promise:{get:function(){return v},configurable:!0,enumerable:!0},console:{get:function(){return b},configurable:!0,enumerable:!0}}),p=function(){var e="playbyplay_support_Vo8yTd6aLS$A8huo9$e7",r=Math.random()+"";try{localStorage[e]=r;var n=localStorage[e]===r;return localStorage.removeItem(e),n}catch(t){return!1}}(),h="object"==typeof JSON,m="isArray"in Array,v="function"==typeof Promise,b="object"==typeof console,S=Object.defineProperties({},{save:{get:function(){return n},configurable:!0,enumerable:!0},load:{get:function(){return a},configurable:!0,enumerable:!0},clear:{get:function(){return c},configurable:!0,enumerable:!0}}),w="playbyplay_runs_A*O%y21#Q1WSh^f09YO!",O=5e4,A=8*O/16,E=200,_=function(e){return e()};e.save=l,e.load=f,e.clear=s});
//# sourceMappingURL=playbyplay.min.js.map