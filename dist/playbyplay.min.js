!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.playbyplay={})}(this,function(e){"use strict";function n(){return p&&y&&f?!0:(d&&console.error("playbyplay is not supported in this browser"),!1)}function r(e){var n=u();n.length&&o(e,n[n.length-1])||(n.push(e),t(n))}function o(e,n){return e&&n&&e.input===n.input&&e.output===n.output}function t(e){for(e.length>S&&e.splice(0,e.length-S);;){var n=JSON.stringify(e);if(n.length>b){if(e.length<2)return void console.error("playbyplay: cannot save run of length "+n.length+", "+("limit is "+b+" code units"));i(e)}else try{return void(localStorage[h]=n)}catch(r){if(a(r)){if(e.length<2)return void console.error("playbyplay: cannot save run of length "+n.length+", exceeds localStorage quota");console.error("playbyplay: localStorage quota exceeded, discarding oldest half of history and retrying"),i(e);continue}return void console.error("playbyplay: could not save run to localStorage",r)}}}function i(e){e.splice(e.length/2,Number.MAX_VALUE)}function a(e){return e&&(22===e.code||1014===e.code&&"NS_ERROR_DOM_QUOTA_REACHED"===e.name)}function u(){var e=localStorage[h];if(!e)return[];var n=l(e);return Array.isArray(n)?n:[]}function l(e,n){try{return JSON.parse(e)}catch(r){}return n}function c(e){return n()?e&&e.input&&e.output?void setTimeout(function(){return g.save(e)},0):void console.error("playbyplay.save: input and output properties are required"):void 0}function s(){return n()?g.load():[]}var p=function(){var e="playbyplay_support_Vo8yTd6aLS$A8huo9$e7",n=Math.random()+"";try{if(localStorage[e]=n,localStorage[e]!==n)return!1}catch(r){return!1}return!0}(),y="JSON"in window&&"parse"in JSON&&"stringify"in JSON,f="isArray"in Array,d="console"in window&&"log"in console&&"error"in console,g=Object.defineProperties({},{save:{get:function(){return r},configurable:!0,enumerable:!0},load:{get:function(){return u},configurable:!0,enumerable:!0}}),h="playbyplay_runs_A*O%y21#Q1WSh^f09YO!",v=5e4,b=8*v/16,S=200;e.save=c,e.load=s});
//# sourceMappingURL=playbyplay.min.js.map