!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.playbyplay={})}(this,function(e){"use strict";function r(){return f&&d&&g?!0:(h&&console.error("playbyplay is not supported in this browser"),!1)}function n(e){var r=i();r.length&&o(e,r[r.length-1])||(r.push(e),t(r))}function o(e,r){return e&&r&&e.input===r.input&&e.output===r.output}function t(e){for(e.length>O&&e.splice(0,e.length-O);;){var r=JSON.stringify(e);if(r.length>m){if(e.length<2)return void console.error("playbyplay: cannot save run of length "+r.length+", "+("limit is "+m+" code units"));a(e)}else try{return void(localStorage[b]=r)}catch(n){if(l(n)){if(e.length<2)return void console.error("playbyplay: cannot save run of length "+r.length+", exceeds localStorage quota");console.error("playbyplay: localStorage quota exceeded, discarding oldest half of history and retrying"),a(e);continue}return void console.error("playbyplay: could not save run to localStorage",n)}}}function a(e){e.splice(e.length/2,Number.MAX_VALUE)}function l(e){return e&&(22===e.code||1014===e.code&&"NS_ERROR_DOM_QUOTA_REACHED"===e.name)}function i(){var e=localStorage[b];if(!e)return[];var r=u(e);return Array.isArray(r)?r:[]}function u(e,r){try{return JSON.parse(e)}catch(n){}return r}function c(){try{localStorage.removeItem(b)}catch(e){console.error("playbyplay: could not clear localStorage",e)}}function s(e){return r()?e&&e.input&&e.output?void setTimeout(function(){return v.save(e)},0):void console.error("playbyplay.save: input and output properties are required"):void 0}function y(){return r()?v.load():[]}function p(){return r()?v.clear():[]}var f=function(){var e="playbyplay_support_Vo8yTd6aLS$A8huo9$e7",r=Math.random()+"";try{if(localStorage[e]=r,localStorage[e]!==r)return!1}catch(n){return!1}return!0}(),d="JSON"in window&&"parse"in JSON&&"stringify"in JSON,g="isArray"in Array,h="console"in window&&"log"in console&&"error"in console,v=Object.defineProperties({},{save:{get:function(){return n},configurable:!0,enumerable:!0},load:{get:function(){return i},configurable:!0,enumerable:!0},clear:{get:function(){return c},configurable:!0,enumerable:!0}}),b="playbyplay_runs_A*O%y21#Q1WSh^f09YO!",S=5e4,m=8*S/16,O=200;e.save=s,e.load=y,e.clear=p});
//# sourceMappingURL=playbyplay.min.js.map